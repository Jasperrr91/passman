<?xml version="1.0" encoding="UTF-8" ?>
<database>
        <name>passman</name>
	<create>true</create>
	<overwrite>true</overwrite>
	<charset>utf8</charset>
	<table>
		<name>*dbprefix*passman_tags</name>
		<declaration>
			<field>
				<name>tag_id</name>
				<type>integer</type>
				<default>0</default>
				<autoincrement>1</autoincrement>
				<length>41</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>user_id</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>64</length>
			</field>
			<field>
				<name>tag_label</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>64</length>
			</field>
			<field>
				<name>renewal_period</name>
				<type>integer</type>
				<default>0</default>
				<notnull>true</notnull>
			</field>
			<field>
				<name>min_pw_strength</name>
				<type>integer</type>
				<default>0</default>
				<notnull>true</notnull>
			</field>
			<index>
				<name>items_tags_tag_label</name>
				<field>
					<name>tag_label</name>
				</field>
			</index>
			<index>
				<name>items_tags_tag_id</name>
				<field>
					<name>tag_id</name>
				</field>
			</index>
			<index>
				<name>items_tags_user_id</name>
				<field>
					<name>user_id</name>
				</field>
			</index>
		</declaration>
	</table>	
	<table>
		<name>*dbprefix*passman_items_tags_xref</name>
		<declaration>
			<field>
				<name>tag_id</name>
				<type>integer</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>item_id</name>
				<type>integer</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<index>
				<name>items_tags_xref_tag_id</name>
				<field>
					<name>tag_id</name>
				</field>
			</index>
			<index>
				<name>items_tags_xref_item_id</name>
				<field>
					<name>item_id</name>
				</field>
			</index>
		</declaration>
	</table>
	<table>
		<name>*dbprefix*passman_items</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<default>0</default>
				<autoincrement>1</autoincrement>
				<length>41</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>user_id</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>64</length>
			</field>
			<field>
				<name>label</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>255</length>
			</field>
			<field>
				<name>description</name>
				<type>clob</type>
			</field>
			<field>
				<name>created</name>
				<type>bigint</type>
				<default>0</default>
			</field>
			<field>
				<name>changed</name>
				<type>bigint</type>
				<default>0</default>
			</field>
			<field>
				<name>password</name>
				<type>clob</type>
			</field>
			<field>
				<name>account</name>
				<type>clob</type>
			</field>
			<field>
				<name>email</name>
				<type>clob</type>
			</field>
			<field>
				<name>url</name>
				<type>clob</type>
			</field>
			<field>
				<name>favicon</name>
				<type>clob</type>
			</field>
			<field>
				<name>expire_time</name>
				<type>text</type>
				<default>0</default>
				<length>255</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>delete_date</name>
				<type>integer</type>
				<default>0</default>
				<notnull>true</notnull>
			</field>
			<field>
				<name>otpsecret</name>
				<type>clob</type>
			</field>
                        <!-- Requiered to identify the shared passwords as they store different kind of data -->
			<field>
				<name>type</name>
				<type>integer</type>
				<length>3</length>
				<default>0</default>
				<unsigned>true</unsigned>
			</field>
			<index>
				<name>item_id_index</name>
				<field>
					<name>id</name>
				</field>
			</index>
			<index>
				<name>item_user_id_index</name>
				<field>
					<name>user_id</name>
				</field>
			</index>
		</declaration>
	</table>	
	<table>
		<name>*dbprefix*passman_files</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<default>0</default>
				<autoincrement>1</autoincrement>
				<length>41</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>item_id</name>
				<type>integer</type>
				<default>0</default>
				<length>41</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>user_id</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>64</length>
			</field>
			<field>
				<name>filename</name>
				<type>clob</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>type</name>
				<type>text</type>
				<length>255</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>mimetype</name>
				<type>clob</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>size</name>
				<length>8</length>
				<type>text</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>content</name>
				<type>blob</type>
				<notnull>true</notnull>
			</field>
			<index>
				<name>file_id_index</name>
				<field>
					<name>id</name>
				</field>
			</index>
			<index>
				<name>file_uid_index</name>
				<field>
					<name>user_id</name>
				</field>
			</index>
			<index>
				<name>file_item_id_index</name>
				<field>
					<name>item_id</name>
				</field>
			</index>
		</declaration>
	</table>
	<table>
		<name>*dbprefix*passman_custom_fields</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<default>0</default>
				<autoincrement>1</autoincrement>
				<length>41</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>item_id</name>
				<type>integer</type>
				<default>0</default>
				<length>41</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>user_id</name>
				<type>text</type>
				<notnull>true</notnull>
				<length>64</length>
			</field>
			<field>
				<name>label</name>
				<type>clob</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>value</name>
				<type>clob</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>clicktoshow</name>
				<type>integer</type>
				<default>0</default>
				<notnull>true</notnull>
			</field>
			<index>
				<name>custom_field_id_index</name>
				<field>
					<name>id</name>
				</field>
			</index>
			<index>
				<name>custom_field_item_id_index</name>
				<field>
					<name>item_id</name>
				</field>
			</index>
			<index>
				<name>custom_field_user_id_index</name>
				<field>
					<name>user_id</name>
				</field>
			</index>
		</declaration>
	</table>
        <table>
            <name>*dbprefix*passman_share_key</name>
            <declaration>
                <field>
                    <name>id</name>
                    <type>integer</type>
                    <default>0</default>
                    <autoincrement>1</autoincrement>
                    <length>41</length>
                    <unsigned>true</unsigned>
                    <notnull>true</notnull>
                </field>
                <field>
                    <name>key</name>
                    <type>clob</type>
                    <notnull>true</notnull>
                </field>
            </declaration>
        </table>
        <table>
            <name>*dbprefix*passman_share</name>
            <declaration>
                <field>
                    <name>kid</name>
                    <type>integer</type>
                    <length>41</length>
                    <notnull>true</notnull>
                </field>
                <field>
                    <name>target</name>
                    <type>integer</type>
                    <length>41</length>
                    <notnull>true</notnull>
                </field>
                <field>
                    <name>mode</name>
                    <type>integer</type>
                    <length>1</length>
                    <unsigned>true</unsigned>
                    <notnull>true</notnull>
                </field>
                <field>
                    <name>uid</name>
                    <type>text</type>
                    <notnull>false</notnull>
                    <length>64</length>
                </field>
                <field>
                    <name>gid</name>
                    <type>text</type>
                    <length>64</length>
                </field>
                <!-- Indexes -->
                <index>
                    <name>share_user_id_index</name>
                    <field>
                            <name>uid</name>
                    </field>
                </index>
                <index>
                    <name>share_group_id_index</name>
                    <field>
                            <name>gid</name>
                    </field>
                </index>
                <index>
                    <name>share_mode_index</name>
                    <field>
                            <name>mode</name>
                    </field>
                </index>
            </declaration>
        </table>
		<table>
			<name>*dbprefix*passman_revisions</name>
			<declaration>
				<field>
					<name>id</name>
					<type>integer</type>
					<default>0</default>
					<autoincrement>1</autoincrement>
					<length>41</length>
					<notnull>true</notnull>
				</field>
				<field>
					<name>item_id</name>
					<type>integer</type>
					<notnull>true</notnull>
					<length>64</length>
				</field>
				<field>
					<name>user_id</name>
					<type>text</type>
					<notnull>true</notnull>
					<length>64</length>
				</field>
				<field>
					<name>data</name>
					<type>clob</type>
				</field>
				<field>
					<name>revision_date</name>
					<type>text</type>
					<default>0</default>
					<length>255</length>
					<notnull>true</notnull>
				</field>
				<index>
					<name>revision_id_index</name>
					<field>
						<name>id</name>
					</field>
				</index>
				<index>
					<name>revision_user_id_index</name>
					<field>
						<name>user_id</name>
					</field>
				</index>
				<index>
					<name>revision_item_id_index</name>
					<field>
						<name>user_id</name>
					</field>
				</index>
			</declaration>
		</table>
</database>
